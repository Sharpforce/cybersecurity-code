FROM node:20.15.0

WORKDIR /usr/src/app

RUN useradd --create-home --shell /bin/bash appuser

COPY package*.json ./
RUN npm install --omit=dev

COPY ./src /usr/src/app

RUN chown -R appuser:appuser /usr/src/app

EXPOSE 3000

USER appuser

CMD ["node", "app.js"]